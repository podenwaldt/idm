{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Quick Test",
            "type": "shell",
            "command": "python",
            "args": ["quick_test.py"],
            "problemMatcher": [],
            "group": {
                "kind": "test",
                "isDefault": true
            },
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "Test Installation",
            "type": "shell",
            "command": "python",
            "args": ["test_installation.py"],
            "problemMatcher": [],
            "group": "test"
        },
        {
            "label": "Generate Fake Data (Small)",
            "type": "shell",
            "command": "python",
            "args": [
                "generate_fake_data.py",
                "--output_dir", "fake_data",
                "--num_train", "200",
                "--num_val", "50",
                "--num_test", "50"
            ],
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "Generate Fake Data (Large)",
            "type": "shell",
            "command": "python",
            "args": [
                "generate_fake_data.py",
                "--output_dir", "fake_data",
                "--num_train", "1000",
                "--num_val", "200",
                "--num_test", "200"
            ],
            "problemMatcher": [],
            "group": "build"
        },
        {
            "label": "Train Model (Fake Data - Quick)",
            "type": "shell",
            "command": "python",
            "args": [
                "train.py",
                "--train_dir", "fake_data/train",
                "--val_dir", "fake_data/val",
                "--test_dir", "fake_data/test",
                "--batch_size", "16",
                "--num_epochs", "10",
                "--num_workers", "0"
            ],
            "problemMatcher": [],
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            }
        },
        {
            "label": "Train Model (Real Data)",
            "type": "shell",
            "command": "python",
            "args": [
                "train.py",
                "--train_dir", "data/train",
                "--val_dir", "data/val",
                "--test_dir", "data/test",
                "--batch_size", "32",
                "--num_epochs", "50"
            ],
            "problemMatcher": [],
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            }
        },
        {
            "label": "Run Inference (Test Frames)",
            "type": "shell",
            "command": "python",
            "args": [
                "example_inference.py",
                "--model_path", "checkpoints/idm_best.pth",
                "--frames", "fake_data/test/frame_0000.jpg", "fake_data/test/frame_0001.jpg",
                "--benchmark"
            ],
            "problemMatcher": [],
            "group": "test"
        },
        {
            "label": "Convert Video to Frames",
            "type": "shell",
            "command": "python",
            "args": [
                "-m", "inverse_dynamics_model.data_preparation",
                "convert",
                "${input:videoPath}",
                "${input:outputDir}",
                "--fps", "30"
            ],
            "problemMatcher": []
        },
        {
            "label": "Split Dataset",
            "type": "shell",
            "command": "python",
            "args": [
                "-m", "inverse_dynamics_model.data_preparation",
                "split",
                "${input:sourceDir}",
                "--train", "0.7",
                "--val", "0.15",
                "--test", "0.15"
            ],
            "problemMatcher": []
        },
        {
            "label": "Validate Dataset",
            "type": "shell",
            "command": "python",
            "args": [
                "-m", "inverse_dynamics_model.data_preparation",
                "validate",
                "${input:datasetDir}"
            ],
            "problemMatcher": []
        },
        {
            "label": "Clean Test Files",
            "type": "shell",
            "command": "rm",
            "args": ["-rf", "fake_data", "test_fake_data", "test_checkpoints", "test_evaluation"],
            "problemMatcher": []
        },
        {
            "label": "Create Test Video from Fake Data",
            "type": "shell",
            "command": "python",
            "args": [
                "create_test_video.py",
                "--data_dir", "fake_data/test",
                "--output", "test_video.mp4"
            ],
            "problemMatcher": []
        },
        {
            "label": "Visualize Predictions on Video",
            "type": "shell",
            "command": "python",
            "args": [
                "visualize_predictions.py",
                "--model_path", "${input:modelPath}",
                "--video_path", "${input:videoPathVis}",
                "--output_path", "${input:outputPathVis}",
                "--resize_width", "640"
            ],
            "problemMatcher": [],
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            }
        },
        {
            "label": "Install Requirements",
            "type": "shell",
            "command": "pip",
            "args": ["install", "-r", "requirements.txt"],
            "problemMatcher": []
        }
    ],
    "inputs": [
        {
            "id": "videoPath",
            "type": "promptString",
            "description": "Path to video file",
            "default": "video.mp4"
        },
        {
            "id": "outputDir",
            "type": "promptString",
            "description": "Output directory for frames",
            "default": "data/raw"
        },
        {
            "id": "sourceDir",
            "type": "promptString",
            "description": "Source directory to split",
            "default": "data/raw"
        },
        {
            "id": "datasetDir",
            "type": "promptString",
            "description": "Dataset directory to validate",
            "default": "data/train"
        },
        {
            "id": "modelPath",
            "type": "promptString",
            "description": "Path to model checkpoint",
            "default": "checkpoints/idm_best.pth"
        },
        {
            "id": "videoPathVis",
            "type": "promptString",
            "description": "Path to input video for visualization",
            "default": "input_video.mp4"
        },
        {
            "id": "outputPathVis",
            "type": "promptString",
            "description": "Path to output visualization video",
            "default": "predictions_visualization.mp4"
        }
    ]
}
